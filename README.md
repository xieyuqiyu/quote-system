# 阀门报价系统

## 项目简介

阀门报价系统是一个专为阀门销售企业设计的智能报价工具，能够根据客户询价表自动生成标准化的报价单。系统集成了OCR功能，支持图片识别和文本提取，大幅提高报价效率和准确性。

## 核心功能

### 🔍 智能型号生成

- 根据阀门描述自动生成标准型号
- 智能补全缺失参数（驱动方式、连接方式、材质等）
- 支持14种基础阀门类型和自定义产品

### 🖼️ OCR图片识别

- 支持扫描件、照片等图片格式
- 自动提取文字信息并转换为Excel格式
- 智能修正OCR识别错误

### ⚙️ 交互式参数选择

- 当型号缺少必要参数时，提供交互界面让用户手动选择
- 批量处理多个产品，提高效率

### 📋 灵活的规则管理

- 用户可自定义各类阀门的默认参数
- 三级优先级机制确保准确匹配（产品名称 > 用户规则 > 智能推断）

### 💰 报价单生成

- 自动匹配价格表中的价格
- 生成标准格式的报价单
- 支持Excel和CSV格式导入导出

### 👥 多用户管理

- 管理员可创建和管理多个用户账号
- 每个用户可设置独立的默认规则
- 自动清理临时文件，保持系统整洁

## 技术架构

- **后端**: FastAPI + Python
- **前端**: React + Ant Design
- **OCR引擎**: Tesseract 5.5.0
- **数据处理**: Pandas + OpenPyXL
- **文件格式**: 支持Excel、CSV、PDF、Word、图片

## 快速开始

### 系统要求

- Python 3.8+
- Windows 10/11, macOS, Linux
- 4GB+ 内存
- 500MB+ 磁盘空间

### 一键部署

#### Windows

```bash
# 双击运行
快速部署.bat
```

#### Linux/macOS

```bash
# 给脚本执行权限
chmod +x 快速部署.sh

# 运行部署脚本
./快速部署.sh
```

### 手动部署

1. **安装依赖**

```bash
cd backend
pip install -r requirements.txt
```

2. **测试OCR功能**

```bash
python ocr_config.py
```

3. **启动服务**

```bash
# 启动后端服务
python main.py

# 启动前端服务（新终端）
cd ../frontend
python -m http.server 8000
```

4. **访问系统**

- 打开浏览器访问：<http://localhost:8000>
- 默认管理员账号：
  - 用户名：admin
  - 密码：admin123

## 项目结构

```
quote-system/
├── backend/                    # 后端服务
│   ├── main.py                # 主服务文件
│   ├── ocr_config.py          # OCR配置
│   ├── requirements.txt       # Python依赖
│   ├── [其他Python模块]
│   └── merchant_data/         # 用户数据目录
├── frontend/                   # 前端界面
│   ├── index.html             # 主页面
│   └── app.js                 # 前端逻辑
├── tupian/                     # OCR引擎（重要！）
│   ├── tesseract.exe          # Tesseract OCR可执行文件
│   ├── tessdata/              # OCR训练数据
│   └── [其他OCR相关文件]
├── 快速部署.bat                # Windows部署脚本
├── 快速部署.sh                 # Linux/macOS部署脚本
├── 部署说明.md                 # 详细部署说明
└── 部署清单.txt                # 部署清单
```

## 重要说明

### OCR文件必须包含

项目中的`tupian/`目录包含了完整的Tesseract OCR引擎，这是系统OCR功能正常工作的关键。部署时必须包含：

- ✅ `tesseract.exe` - OCR可执行文件
- ✅ `tessdata/` - 训练数据目录
- ✅ 所有DLL依赖文件

### 为什么必须包含OCR文件？

1. **确保功能完整性** - 系统支持图片识别功能
2. **避免依赖问题** - 其他电脑无需单独安装Tesseract
3. **简化部署流程** - 一键部署，即开即用
4. **版本一致性** - 确保OCR版本与系统兼容

## 使用指南

### 1. 上传文件

- **价格表**: 上传包含型号、规格、品牌、价格的价格对照表
- **询价表**: 上传客户询价表（支持Excel、CSV、PDF、Word、图片）

### 2. 配置规则

- 设置各类阀门的默认参数
- 自定义产品类型和参数

### 3. 生成报价

- 选择价格表和询价表
- 系统自动匹配型号和价格
- 生成标准格式的报价单

### 4. 交互式处理

- 当产品参数不完整时，系统会提示用户选择
- 批量处理多个产品，提高效率

## 常见问题

### Q: OCR功能不工作怎么办？

A: 检查`tupian/`目录是否完整，运行`python ocr_config.py`测试OCR功能。

### Q: 端口被占用怎么办？

A: 修改`main.py`中的端口号，或关闭占用端口的程序。

### Q: 依赖安装失败怎么办？

A: 升级pip或使用国内镜像源安装。

### Q: 如何备份数据？

A: 备份`backend/merchant_data/`目录和`backend/accounts.txt`文件。

## 技术支持

如遇到问题，请检查：

1. Python版本是否符合要求
2. 所有文件是否完整
3. OCR功能是否正常
4. 端口是否被占用
5. 防火墙设置是否允许访问

## 许可证

本项目仅供内部使用。

---

**注意**: 请确保完整复制项目文件，特别是`tupian/`目录，这是OCR功能正常工作的关键！
