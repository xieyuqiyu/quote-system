# 报价系统依赖安装说明

## 问题描述

在Windows系统上安装numpy时可能会遇到编译错误，这是因为numpy需要C编译器来编译扩展模块。

## 解决方案

### 方案1: 使用预编译包（推荐）

```bash
# 升级pip
python -m pip install --upgrade pip

# 强制使用预编译的numpy
pip install numpy==1.23.5 --only-binary=all

# 安装其他依赖
pip install -r requirements_simple.txt
```

### 方案2: 使用批处理脚本

双击运行 `install_dependencies.bat` 文件

### 方案3: 使用Python脚本

```bash
python install_dependencies.py
```

### 方案4: 安装Visual Studio Build Tools

如果上述方法都失败，可以安装Visual Studio Build Tools：

1. 下载Visual Studio Build Tools: <https://visualstudio.microsoft.com/downloads/#build-tools-for-visual-studio-2022>
2. 安装时选择"C++ build tools"工作负载
3. 重新运行安装命令

### 方案5: 使用Anaconda/Miniconda

```bash
# 安装Anaconda后
conda install numpy pandas
pip install -r requirements.txt
```

## 版本兼容性说明

### 当前使用的版本

- Python: 3.8+
- numpy: 1.23.5 (稳定版本，避免编译问题)
- pandas: 1.5.3 (与numpy 1.23.5兼容)
- fastapi: 0.104.1
- uvicorn: 0.24.0

### 为什么使用这些版本

1. **numpy 1.23.5**: 最后一个支持Python 3.8的稳定版本，预编译包广泛可用
2. **pandas 1.5.3**: 与numpy 1.23.5完全兼容
3. **避免编译**: 这些版本都有预编译的wheel包，无需本地编译

## 故障排除

### 错误1: "Unknown compiler(s)"

**原因**: 缺少C编译器
**解决**: 使用 `--only-binary=all` 参数强制使用预编译包

### 错误2: "Failed to activate VS environment"

**原因**: 没有安装Visual Studio Build Tools
**解决**: 使用预编译包或安装Build Tools

### 错误3: "subprocess-exited-with-error"

**原因**: 编译失败
**解决**: 使用较老的稳定版本

## 验证安装

安装完成后，运行以下命令验证：

```python
python -c "import numpy; import pandas; import fastapi; print('所有依赖安装成功！')"
```

## 启动系统

安装完成后，运行：

```bash
python main.py
```

系统将在 <http://localhost:8001> 启动
